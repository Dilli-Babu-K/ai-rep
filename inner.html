<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AI Image Generator</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { font-family: system-ui, sans-serif; }
  </style>
</head>
<body class="bg-gray-900 text-gray-100">
  <!-- Header -->
  <header class="bg-gray-800 p-6 text-center">
    <h1 class="text-3xl font-bold text-blue-400">🎨 AI Image Generator</h1>
  </header>

  <!-- Input -->
  <main class="max-w-3xl mx-auto p-6 text-center">
    <div class="flex justify-center items-center space-x-2">
      <input id="prompt" type="text" placeholder="Enter a prompt..."
             class="w-2/3 p-3 rounded-lg text-black">
      <button id="generate" class="bg-blue-600 hover:bg-blue-700 px-6 py-3 rounded-lg">
        Generate
      </button>
    </div>

    <div id="loading" class="hidden mt-6">⏳ Generating image...</div>
    <div id="error" class="hidden mt-6 text-red-400">❌ Error generating image.</div>
    <div id="imageContainer" class="mt-6 flex justify-center"></div>
  </main>

  <script>
    const BACKEND_URL = "https://your-vercel-app.vercel.app/api/generate"; // 🔧 change this

    const btn = document.getElementById("generate");
    const input = document.getElementById("prompt");
    const loading = document.getElementById("loading");
    const error = document.getElementById("error");
    const container = document.getElementById("imageContainer");

    async function generate(prompt) {
      loading.classList.remove("hidden");
      error.classList.add("hidden");
      container.innerHTML = "";

      try {
        const res = await fetch(BACKEND_URL, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ prompt })
        });

        const data = await res.json();
        if (data.url) {
          const img = document.createElement("img");
          img.src = data.url;
          img.alt = prompt;
          img.className = "rounded-lg shadow-lg max-w-xl";
          container.appendChild(img);
        } else {
          error.classList.remove("hidden");
        }
      } catch (e) {
        console.error(e);
        error.classList.remove("hidden");
      } finally {
        loading.classList.add("hidden");
      }
    }

    btn.addEventListener("click", () => {
      const prompt = input.value.trim();
      if (prompt) generate(prompt);
    });
  </script>
</body>
</html>
